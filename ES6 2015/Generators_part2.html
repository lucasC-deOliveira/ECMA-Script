<html>
    <body>
        <div id='test'>
            <script>

                function* conversar(){
                  
                    let opcao = yield 'iae tudo bem ?'
                    
                   if(opcao === 'sim'){
                    yield  "Otimo fico Feliz"

                   opcao = yield "como posso te ajudar? Posso contar uma piada para começar ? "
                   
                   if(opcao === 'sim'){

                    fetch('dados/piadas.json')
                    .then(response => response.json())
                    .then(piadas => { 
                        let idx = Math.floor(Math.random() * 10)
                        let piada= piadas[idx]
                        console.log(piada.piada)

                        setTimeout(() =>{
                            console.log(piada.resposta)
                            console.log("kkkkkkkkkkkkkkkk")
                        }, 4000)
                    })
                    yield "Digite 1 para compras, 2 para vendas ou  3 para falar conosco"

                   }
                   else{
                    yield "Digite 1 para compras, 2 para vendas ou  3 para falar conosco"

                   }
                  

                } else{
                    yield "Respire fundo e tenha paciencia"
                    yield "Digite 1 para compras, 2 para vendas ou  3 para falar conosco"

                }   

                return "Atendimento finalizado"


                }

                
                let conversa = conversar();
                function acao(){
                    
                    let resposta = document.getElementById("inputResposta").value;

                    let iteracao = conversa.next(resposta);

                    console.log(iteracao)

                    document.getElementById("inputResposta").value = ""

                    if(iteracao.done === true){
                        document.getElementById('test').style.display = 'none'
                    }
                    
                }

                


            </script>
            
            <button type="button" onclick="acao()">Avançar</button>
            <input type="text" id='inputResposta'>
        </div>
    </body>
</html>